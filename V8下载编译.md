

## 0x01准备

阿里云服务器(中国香港区)

Ubuntu20.04

## 0x02配置

***在阿里云服务器上下载V8***

### 安装depot_tools

```
git clone https://chromium.googlesource.com/chromium/tools/depot_tools.git
echo 'export PATH=$PATH:"/depot_tools"' >> ~/.bashrc
# clone depot_tools，并且把depot_tools的目录加到PATH环境变量，
# /depot_tools改成depot_tools的目录
# 因为服务器在香港所以第一个命令可以成功clone了
```



### 下载V8&切换版本

```
fetch v8
# 下载v8的repo，这个也是需要git代理才能成功下载的
cd v8
git checkout 版本号
gclient sync
```

```
tar -czvf v8.tar.gz v8 //压缩
```

***在Ubuntu20.04上编译***

```
scp root@fuwuqiIP:/root/v8.tar.gz /home //从服务器下载V8包
tar -xzvf v8.tar.gz  //解压
```

### 安装ninja

```
git clone https://github.com/ninja-build/ninja.git
cd ninja && ./configure.py --bootstrap && cd ..
# clone并且configure
echo 'export PATH=$PATH:"/ninja"' >> ~/.bashrc
# /ninja改成ninja的目录
```

### 编译V8

```
./tools/dev/v8gen.py x64.debug
ninja -C ./out.gn/x64.debug/
```

编译release版本的话，最后两行改成这个。

```
./tools/dev/v8gen.py x64.release
ninja -C out.gn/x64.release
```

## 0x03 启动

### release

```
./out.gn/x64.release/d8
# 启动interactive d8 shell
./out.gn/x64.release/d8 test.js
# 运行test.js
```

### debug

```
./out.gn/x64.debug/d8
# 启动interactive d8 shell
./out.gn/x64.debug/d8 test.js
# 运行test.js
```

